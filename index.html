<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—˜ë¦¬í•˜ì´ ë¬¸í•´ë ¥ ì§„ë‹¨ ê²€ì‚¬</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        /* =========================================
           1. ì„¤ì • ë° ë³€ìˆ˜ (Variables & Reset)
           ========================================= */
        :root {
            /* Main Colors */
            --primary-blue: #1e7df0;
            --sky-blue: #00b0ff;
            --text-dark: #333;
            --text-gray: #666;
            --bg-gray: #f2f2f2;
            --title-bg: #e9ecef;
            
            /* Chart Colors */
            --col-vocab: #9c27b0; 
            --col-fact: #00c896;  
            --col-crit: #ffb300;  
            --col-inf: #ff5252;   
            
            /* Pastel Banner Colors */
            --b-green: #a5d6a7; --b-yellow: #fff59d; --b-orange: #ffcc80;
            --b-blue: #90caf9; --b-purple: #ce93d8; --b-teal: #80cbc4;
            --b-brown: #bcaaa4; --b-lime: #e6ee9c; --b-sky: #81d4fa; --b-gold: #ffe082;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Noto Sans KR', sans-serif; }
        body { background-color: var(--bg-gray); display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        button, select { border: none; background: none; cursor: pointer; font-family: inherit; outline: none; }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #aaa; }

        /* =========================================
           2. ë ˆì´ì•„ì›ƒ (Layout)
           ========================================= */
        .app-container { 
            width: 1200px; height: 800px; 
            background: white; border-radius: 12px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
            overflow: hidden; position: relative; 
            display: flex; flex-direction: column;
            margin-bottom: 0; 
        }
        
        .copyright-footer {
            margin-top: 20px;
            font-size: 12px;
            color: #999;
            text-align: center;
            font-weight: 500;
        }

        /* Common Utilities */
        .highlight-blue { color: var(--sky-blue); font-weight: 700; }
        .section-title-pill { 
            display: flex; justify-content: space-between; align-items: center; 
            background-color: var(--title-bg); color: var(--text-dark); 
            padding: 10px 20px; border-radius: 30px; 
            font-size: 16px; font-weight: 700; margin-bottom: 20px; width: 100%; 
        }

        /* =========================================
           3. GNB (Global Navigation Bar)
           ========================================= */
        .gnb { 
            background-color: #2b2b2b; height: 64px; 
            display: flex; align-items: center; padding: 0 30px; 
            color: #aaa; font-size: 15px; font-weight: 500; flex-shrink: 0;
        }
        .gnb-logo { font-weight: 900; font-size: 26px; margin-right: 40px; letter-spacing: -1px; cursor: pointer; }
        .logo-eli { color: #ff9800; } .logo-high { color: #00b0ff; }
        .gnb-menu { display: flex; gap: 12px; flex: 1; height: 100%; } 
        .gnb-item { 
            cursor: pointer; height: 100%; display: flex; align-items: center; 
            padding: 0 12px; 
            border-bottom: 4px solid transparent; transition: all 0.2s;
            white-space: nowrap; 
        }
        .gnb-item.active { color: white; font-weight: 800; border-bottom: 4px solid white; }
        .gnb-item:hover { color: #fff; }

        /* =========================================
           4. ë©”ì¸ í™”ë©´ (New Dashboard Layout)
           ========================================= */
        #main-screen { flex: 1; background-color: #f5f6f8; padding: 20px; overflow-y: auto; }
        .dashboard-grid { display: grid; grid-template-columns: 200px 1fr 320px; gap: 20px; height: 600px; }

        /* --- Left Column --- */
        .left-sidebar { display: flex; flex-direction: column; gap: 20px; height: 100%; }
        .subject-menu-box { 
            background: #e0f2f1; border-radius: 12px; overflow: hidden; border: 1px solid #b2dfdb; height: 460px; 
            display: flex; flex-direction: column; 
        }
        .subject-header { padding: 15px; font-weight: 800; font-size: 16px; color: #00695c; border-bottom: 1px solid #b2dfdb; display: flex; justify-content: space-between; align-items: center; }
        .subject-list { display: flex; flex-direction: column; flex: 1; }
        .subject-item { padding: 15px 20px; font-weight: 700; color: #004d40; cursor: pointer; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid rgba(0,0,0,0.05); transition: background 0.2s; flex: 1; }
        .subject-item:hover { background: #b2dfdb; }
        .subject-item:last-child { border-bottom: none; }
        .subject-icon { font-size: 18px; width: 24px; text-align: center; }

        .story-banner { 
            background: #80deea; border-radius: 12px; padding: 20px; color: #006064; 
            text-align: center; font-weight: 700; cursor: pointer; 
            box-shadow: 0 4px 10px rgba(0,188,212,0.1); height: 120px; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
        }
        .story-title { font-size: 20px; margin-bottom: 5px; line-height: 1.3; }
        .story-sub { font-size: 13px; opacity: 0.8; }

        /* --- Center Column --- */
        .center-feed { display: flex; flex-direction: column; gap: 20px; height: 100%; }
        
        .main-banner-card {
            border-radius: 16px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 40px;
        }
        .main-banner-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .banner-text-group {
            display: flex; flex-direction: column; align-items: flex-start; z-index: 2;
        }
        .banner-action-group {
            display: flex; flex-direction: column; align-items: center; z-index: 2;
        }
        .banner-cta-btn {
            margin-top: 15px;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 800;
            display: flex; align-items: center; gap: 5px;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }
        .main-banner-card:hover .banner-cta-btn {
            background: #fff;
            transform: scale(1.05);
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        /* 1. Hero Banner */
        .hero-banner { 
            height: 240px; 
            background: linear-gradient(120deg, #fff3e0 0%, #ffe0b2 100%);
            border: 2px solid #fff;
            box-shadow: 0 8px 20px rgba(239, 108, 0, 0.1);
        }
        .hero-banner .hero-bg-pattern {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(#ffcc80 15%, transparent 16%);
            background-size: 24px 24px; opacity: 0.3; z-index: 1;
        }
        .hero-tag { 
            background: #ef6c00; color: #fff; padding: 6px 14px; border-radius: 20px; 
            font-weight: 700; font-size: 13px; margin-bottom: 12px; display: inline-block;
            box-shadow: 0 2px 4px rgba(239, 108, 0, 0.3);
        }
        .hero-main-title { 
            font-size: 34px; font-weight: 900; color: #3e2723; margin-bottom: 8px; line-height: 1.2; 
        }
        .hero-sub-title { font-size: 17px; color: #6d4c41; font-weight: 600; }
        .hero-icon-visual { font-size: 80px; filter: drop-shadow(0 4px 0 rgba(0,0,0,0.1)); transition: transform 0.3s; }
        .hero-banner:hover .hero-icon-visual { transform: rotate(10deg) scale(1.1); }
        .hero-cta { color: #ef6c00; }

        /* 2. Diagnostic Banner */
        .diagnostic-trigger-banner { 
            height: 200px; 
            background: linear-gradient(120deg, #e3f2fd 0%, #bbdefb 100%);
            border: 2px solid #fff;
            box-shadow: 0 8px 20px rgba(30, 125, 240, 0.1);
        }
        .diag-bg-circle {
            position: absolute; right: -20px; bottom: -40px; width: 180px; height: 180px;
            background: rgba(255,255,255,0.3); border-radius: 50%; z-index: 1;
        }
        .diagnostic-trigger-banner .hero-tag {
            background: var(--primary-blue);
            box-shadow: 0 2px 4px rgba(30, 125, 240, 0.3);
        }
        .diag-sub { font-size: 15px; color: #1565c0; font-weight: 700; margin-bottom: 5px; }
        .diag-title { font-size: 26px; font-weight: 900; color: #0d47a1; letter-spacing: -0.5px; }
        .diag-icon-visual { font-size: 55px; filter: drop-shadow(0 4px 0 rgba(0,0,0,0.1)); transition: transform 0.3s; }
        .diagnostic-trigger-banner:hover .diag-icon-visual { transform: translateY(-5px); }
        .diag-cta { color: #1565c0; }

        .bottom-banner-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; height: 120px; flex-shrink: 0; }
        .sub-banner { 
            height: 100%; border-radius: 12px; overflow: hidden; position: relative; 
            display: flex; flex-direction: column; justify-content: center; padding: 20px; 
            color: #333; font-weight: 700; cursor: pointer; transition: transform 0.2s; 
        }
        .sub-banner:hover { transform: translateY(-3px); }
        .sb-1 { background: linear-gradient(to right, #e1bee7, #ce93d8); color: #4a148c; }
        .sb-2 { background: linear-gradient(to right, #fff9c4, #fff59d); color: #f57f17; }
        .sb-title { font-size: 18px; margin-bottom: 5px; z-index: 1; }
        .sb-desc { font-size: 13px; font-weight: 400; opacity: 0.9; z-index: 1; }
        .sb-img { position: absolute; right: 10px; bottom: 10px; font-size: 40px; opacity: 0.5; }

        /* --- Right Column --- */
        .right-sidebar { display: flex; flex-direction: column; height: 100%; gap: 20px; }
        .plus-box { background: white; border-radius: 12px; padding: 20px; border: 1px solid #eee; flex-shrink: 0; }
        .widget-title { font-size: 16px; font-weight: 800; color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 5px; }
        .plus-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .plus-item { background: #f5f5f5; border-radius: 8px; padding: 10px; font-size: 13px; font-weight: 600; color: #555; display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .plus-item:hover { background: #eee; }
        .pi-icon { width: 24px; height: 24px; background: #fff; border-radius: 5px; display: flex; justify-content: center; align-items: center; font-size: 12px; border: 1px solid #ddd; }

        .app-grid { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: repeat(3, 1fr); gap: 10px; flex-grow: 1; }
        .app-card { 
            height: 100%; border-radius: 10px; padding: 10px; color: #333; font-weight: 700; font-size: 15px; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; 
            cursor: pointer; transition: transform 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.05); line-height: 1.3; 
        }
        .app-card:hover { transform: scale(1.05); z-index: 2; }
        
        .bg-lime { background: var(--b-lime); color: #558b2f; } .bg-purple { background: var(--b-purple); color: #6a1b9a; }
        .bg-sky { background: var(--b-sky); color: #0277bd; } .bg-brown { background: var(--b-brown); color: #4e342e; }
        .bg-teal { background: var(--b-teal); color: #00695c; } .bg-gold { background: var(--b-gold); color: #ff6f00; }

        /* =========================================
           5. í€´ì¦ˆ í™”ë©´ (ê°œì„ ëœ UI)
           ========================================= */
        #quiz-screen { 
            display: none; height: 100%; 
            flex-direction: column; background: #fff;
        }
        
        /* 5-1. Quiz Header */
        .quiz-header {
            height: 80px; flex-shrink: 0;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 40px; border-bottom: 1px solid #eee;
            background: #fff;
        }
        .quiz-title-area { display: flex; align-items: center; gap: 15px; }
        .quiz-title-logo { font-size: 14px; font-weight: 900; color: var(--primary-blue); background: #e3f2fd; padding: 5px 12px; border-radius: 20px; }
        .quiz-main-title { font-size: 20px; font-weight: 800; color: #333; }
        
        .quiz-progress-wrap { display: flex; align-items: center; gap: 10px; margin-left: 20px; }
        .progress-pill {
            display: flex; align-items: center; gap: 8px;
            padding: 8px 16px; border-radius: 24px; background: #f5f5f5; color: #aaa;
            font-size: 14px; font-weight: 700; transition: all 0.3s;
        }
        .progress-pill.active { background: #e3f2fd; color: var(--primary-blue); }
        .progress-pill i { font-style: normal; font-size: 16px; }

        /* 5-2. Quiz Body */
        .quiz-body { flex: 1; padding: 0; overflow: hidden; display: flex; background: #f9f9fb; }
        .question-step { display: none; width: 100%; height: 100%; flex-direction: column; animation: fadeIn 0.4s ease-out; }
        .question-step.active { display: flex; }
        
        /* [Type 1] Center Layout (For Vocab) */
        .center-layout-container {
            width: 100%; max-width: 900px; margin: 0 auto;
            display: flex; flex-direction: column; justify-content: center; height: 100%;
            padding: 40px; padding-bottom: 100px; /* í‘¸í„° ì—¬ë°± í™•ë³´ */
        }
        .q-badge {
            align-self: flex-start;
            background: #333; color: #fff; font-size: 13px; font-weight: 700;
            padding: 4px 10px; border-radius: 6px; margin-bottom: 15px;
            display: inline-flex; align-items: center; gap: 5px;
        }
        .q-text-large { font-size: 28px; font-weight: 800; color: #222; margin-bottom: 40px; line-height: 1.4; }
        
        .vocab-box-wrapper {
            background: #fff; border: 2px solid #333; border-radius: 20px;
            padding: 60px 50px 50px 50px; text-align: center; margin-bottom: 50px;
            position: relative; box-shadow: 8px 8px 0 rgba(0,0,0,0.1);
            overflow: visible; /* ë¼ë²¨ì´ ë°•ìŠ¤ ë°–ìœ¼ë¡œ ë‚˜ê°ˆ ìˆ˜ ìˆê²Œ ìˆ˜ì • */
        }
        .vocab-box-wrapper::before { display: none; }
        
        /* [ìˆ˜ì •] ë³´ê¸° ë¼ë²¨ ìŠ¤íƒ€ì¼ (Solid Black Icon Style) */
        .vocab-label-badge {
            position: absolute;
            top: -16px;
            left: 30px; 
            transform: none; 
            background: #333; /* Solid filled background */
            color: #fff; /* White text */
            border: 2px solid #333;
            padding: 6px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 700;
            line-height: 1;
            z-index: 2;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .vocab-sentence { font-size: 26px; font-weight: 500; color: #333; white-space: nowrap; }
        .vocab-blank { 
            display: inline-block; width: 100px; border-bottom: 3px solid var(--primary-blue); 
            text-align: center; color: var(--primary-blue); font-weight: bold; margin: 0 10px;
        }
        
        .answer-grid { 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; 
            max-width: 600px; margin: 0 auto; width: 100%;
        }
        .answer-card-btn {
            background: #fff; border: 1px solid #ddd; border-radius: 16px;
            height: 80px; font-size: 20px; font-weight: 700; color: #555;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: all 0.2s; position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .answer-card-btn:hover { transform: translateY(-3px); border-color: var(--primary-blue); color: var(--primary-blue); }
        .answer-card-btn.selected { 
            background: #e3f2fd; border: 2px solid var(--primary-blue); color: var(--primary-blue); 
            box-shadow: 0 0 0 4px rgba(30,125,240,0.1);
        }
        
        /* [Type 2] Split Layout (For Reading) */
        .split-layout-container { display: flex; width: 100%; height: 100%; }
        
        /* [ìˆ˜ì •] Left: Passage Viewer - í”„ë ˆì„ ì œê±° ë° í†µì§œ ë ˆì´ì•„ì›ƒ */
        .passage-viewer {
            flex: 6; 
            /* íšŒìƒ‰ ë°°ê²½(#eee) ì œê±°í•˜ê³  í°ìƒ‰(#fff)ìœ¼ë¡œ ë³€ê²½ */
            background: #fff; 
            /* ë‚´ë¶€ íŒ¨ë”© ì œê±° (passage-paperê°€ ì „ì²´ ì°¨ì§€) */
            padding: 0; 
            overflow: auto; /* ì—¬ê¸°ì„œ ìŠ¤í¬ë¡¤ ì²˜ë¦¬ */
            display: block; 
            border-right: 1px solid #ddd; /* ì˜¤ë¥¸ìª½ ì˜ì—­ê³¼ êµ¬ë¶„ì„  */
        }
        
        /* [ìˆ˜ì •] Paper ìŠ¤íƒ€ì¼ì„ ì „ì²´ ì±„ì›€ í˜•íƒœë¡œ ë³€ê²½ */
        .passage-paper {
            width: 100%; 
            max-width: none; /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ í•´ì œ */
            background: transparent;
            padding: 50px 60px; 
            box-shadow: none; /* ê·¸ë¦¼ì í”„ë ˆì„ ì œê±° */
            min-height: auto; 
            font-size: 17px; line-height: 1.9; color: #444;
            position: relative;
            /* [ìˆ˜ì •] í•˜ë‹¨ ì—¬ë°± ì¶”ê°€ (ì§€ë¬¸ ë§ˆì§€ë§‰ ë¬¸ì¥ ì•„ë˜ ë„‰ë„‰íˆ í™•ë³´) */
            padding-bottom: 180px; 
        }
        /* ì±… ì—®ì„(ìŠ¤í”„ë§) íš¨ê³¼ ì œê±° */
        .passage-paper::before { display: none; }

        .passage-title {
            font-size: 22px; font-weight: 800; color: #222;
            padding-bottom: 20px; margin-bottom: 25px; border-bottom: 2px solid #333;
            text-align: center;
        }
        .p-indent { text-indent: 1em; margin-bottom: 1em; text-align: justify; }
        .highlight-word { background: linear-gradient(to top, #fff9c4 40%, transparent 40%); font-weight: 700; }
        
        /* Right: Problem Solver */
        .problem-solver {
            flex: 4; background: #fff; 
            /* border-leftëŠ” passage-viewerì˜ border-rightë¡œ ëŒ€ì²´í•˜ê±°ë‚˜ ìœ ì§€ */
            padding: 40px 40px 120px 40px; /* Bottom padding for fixed footer */
            display: flex; flex-direction: column; overflow-y: auto; position: relative;
        }
        .prob-header { margin-bottom: 30px; }
        .prob-q-text { font-size: 22px; font-weight: 700; color: #222; line-height: 1.4; margin-top: 10px; }
        
        .choice-stack { display: flex; flex-direction: column; gap: 12px; }
        .choice-row-btn {
            width: 100%; padding: 16px 20px;
            border: 1px solid #e0e0e0; border-radius: 12px;
            background: #fff; text-align: left;
            font-size: 16px; color: #555; font-weight: 500;
            cursor: pointer; transition: all 0.2s;
            display: flex; align-items: center; gap: 12px;
        }
        .choice-num {
            width: 28px; height: 28px; border-radius: 50%; border: 1px solid #ccc;
            display: flex; justify-content: center; align-items: center;
            font-size: 14px; font-weight: 700; color: #999; flex-shrink: 0; transition: 0.2s;
        }
        .choice-row-btn:hover { background: #f8fbff; border-color: var(--primary-blue); }
        .choice-row-btn:hover .choice-num { border-color: var(--primary-blue); color: var(--primary-blue); }
        
        .choice-row-btn.selected { 
            background: #e3f2fd; border-color: var(--primary-blue); color: var(--primary-blue); font-weight: 700; 
        }
        .choice-row-btn.selected .choice-num {
            background: var(--primary-blue); color: #fff; border-color: var(--primary-blue);
        }

        /* 5-3. Quiz Footer (Floating) */
        .quiz-footer {
            height: 80px; 
            background: rgba(255, 255, 255, 0.85); /* ë°˜íˆ¬ëª… ë°°ê²½ */
            backdrop-filter: blur(10px); 
            border-top: 1px solid rgba(0,0,0,0.05); 
            display: flex; align-items: center; justify-content: center;
            position: absolute; bottom: 0; width: 100%;
            padding: 0 40px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.03); 
            z-index: 10;
        }
        
        .next-btn-pill {
            background: #333; color: #fff;
            /* [ìˆ˜ì •] ë²„íŠ¼ ê°€ë¡œ ë„ˆë¹„ ì¤„ì„ (í…ìŠ¤íŠ¸+ì•„ì´ì½˜ ê°ìŒ€ ì •ë„) */
            padding: 12px 30px; 
            border-radius: 30px;
            font-size: 16px; font-weight: 700;
            display: flex; align-items: center; gap: 10px;
            transition: all 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
        .next-btn-pill:hover { background: var(--primary-blue); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(30,125,240,0.3); }
        .next-btn-pill span { font-size: 14px; opacity: 0.8; display: flex; align-items: center; } 

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* =========================================
           6. ë¡œë”© ë° ê²°ê³¼ í™”ë©´
           ========================================= */
        #loading-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.95); z-index: 100; flex-direction: column; justify-content: center; align-items: center; text-align: center; display: none; }
        
        .loading-icon { width: 180px; height: 180px; margin-bottom: 20px; animation: robotBounce 0.8s infinite ease-in-out alternate; }
        .loading-icon svg { width: 100%; height: 100%; display: block; }
        @keyframes robotBounce { 0% { transform: translateY(0); } 100% { transform: translateY(-15px); } }
        
        .loading-track { width: 320px; height: 16px; background-color: #eee; border-radius: 10px; margin-top: 30px; margin-bottom: 0; overflow: hidden; box-shadow: inset 0 1px 3px rgba(0,0,0,0.1); }
        .loading-bar { width: 0%; height: 100%; background: linear-gradient(90deg, #1e7df0, #00b0ff); border-radius: 10px; }
        .loading-bar.fill-animation { animation: gaugeFill 2.5s linear forwards; }
        @keyframes gaugeFill { 0% { width: 0%; } 100% { width: 100%; } }

        .loading-text { font-size: 18px; font-weight: 700; color: var(--text-dark); }
        .loading-sub { font-size: 18px; color: var(--text-gray); margin-top: 5px; }

        /* ê²°ê³¼ ë¦¬í¬íŠ¸ CSS */
        #result-screen { padding: 30px; overflow-y: auto; padding-bottom: 50px; animation: slideUp 0.8s ease-out; display: none; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        
        .header-res { display: flex; justify-content: center; align-items: center; margin-bottom: 30px; background-color: var(--title-bg); padding: 15px; border-radius: 12px; position: relative; }
        .header-res h1 { font-size: 24px; color: var(--text-dark); margin: 0; }
        .header-res h1 span { color: var(--primary-blue); }
        .close-btn { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); width: 32px; height: 32px; background-color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 2px 6px rgba(0,0,0,0.1); color: #666; cursor: pointer; }

        .info-bar { display: flex; gap: 40px; margin-bottom: 30px; align-items: center; position: relative; }
        .info-item { display: flex; align-items: center; gap: 5px; white-space: nowrap; position: relative; }
        .info-item.right-end { margin-left: auto; justify-content: flex-end; }
        .info-badge { background-color: var(--primary-blue); color: white; padding: 6px 12px; border-radius: 20px; font-weight: 700; font-size: 14px; }
        .info-text { font-size: 16px; font-weight: 500; color: #333; }
        
        .level-guide-btn { background-color: #bbb; color: white; padding: 4px 25px 4px 10px; border-radius: 4px; font-size: 11px; margin-left: 2px; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='16' height='16' fill='white'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 5px center; }
        .q-mark-icon { display: inline-flex; width: 16px; height: 16px; background: rgba(255,255,255,0.3); border-radius: 50%; align-items: center; justify-content: center; font-size: 11px; margin-left: 5px; cursor: help; }
        .dropdown-select { padding: 8px 25px 8px 10px; width: 125px; border: 1px solid #ddd; border-radius: 20px; font-size: 13px; color: #555; background-color: white; cursor: pointer; appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='16' height='16' fill='%23555'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 8px center; }

        /* ê³µí†µ íˆ´íŒ ë° íŒì—… ìŠ¤íƒ€ì¼ */
        .klq-tooltip { visibility: hidden; width: 250px; background-color: #333; color: #fff; text-align: center; border-radius: 6px; padding: 10px; position: absolute; z-index: 100; top: 130%; left: 50%; transform: translateX(-50%); font-size: 12px; line-height: 1.5; box-shadow: 0 4px 10px rgba(0,0,0,0.2); opacity: 0; transition: opacity 0.3s; }
        .klq-tooltip::after { content: ""; position: absolute; bottom: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: transparent transparent #333 transparent; }
        .klq-tooltip.show { visibility: visible; opacity: 1; }
        
        .level-dropdown { display: none; position: absolute; top: calc(100% + 5px); right: 0; width: 140px; background: white; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.15); z-index: 100; flex-direction: column; overflow: hidden; left: auto; }
        .level-dropdown.show { display: flex; animation: fadeIn 0.3s; }
        .level-item { padding: 10px; font-size: 13px; color: #555; text-align: center; border-bottom: 1px solid #eee; }
        .level-item:last-child { border-bottom: none; }
        .level-item.active { background-color: #e3f2fd; color: var(--primary-blue); font-weight: bold; }

        .tooltip-text { 
            visibility: hidden; width: 200px; background-color: rgba(30, 30, 30, 0.95); color: #fff; text-align: center; 
            border-radius: 8px; padding: 10px; position: absolute; z-index: 10000; 
            top: 60px; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; 
            font-size: 12px; line-height: 1.5; box-shadow: 0 4px 15px rgba(0,0,0,0.2); word-break: keep-all; 
        }
        .tooltip-text::after { 
            content: ""; position: absolute; bottom: 100%; top: auto;
            left: 50%; margin-left: -6px; border-width: 6px; border-style: solid; 
            border-color: transparent transparent rgba(30, 30, 30, 0.95) transparent; 
        }
        .tooltip-text.show { visibility: visible; opacity: 1; }

        /* Grid ë¹„ìœ¨ */
        .top-summary-container { display: grid; grid-template-columns: 780px 330px; gap: 30px; margin-bottom: 40px; }
        .summary-left { display: flex; gap: 20px; background: #f8f9fb; padding: 25px; border-radius: 15px; align-items: center; width: 100%; }
        .summary-right { background: white; border: 1px solid #eee; border-radius: 15px; padding: 25px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding-top: 25px; width: 100%; }
        
        .donut-chart-wrap { text-align: center; margin-left: 5px; width: 220px; flex-shrink: 0; }
        .donut-chart-svg { width: 180px; height: 180px; transform: rotate(-90deg); }
        .donut-bg-ring { fill: none; stroke: #eee; stroke-width: 25; } 
        .donut-prog-ring { fill: none; stroke: var(--primary-blue); stroke-width: 25; stroke-linecap: round; 
            stroke-dasharray: 471; stroke-dashoffset: 471; transition: stroke-dashoffset 0.8s ease-out; } 
        .donut-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 32px; font-weight: bold; color: var(--primary-blue); }
        .donut-label { font-size: 13px; color: #666; margin-top: 10px; font-weight: 500; }
        
        .gauge-chart-container { width: 100%; display: flex; flex-direction: column; align-items: center; }
        .gauge-legend { display: flex; gap: 15px; font-size: 12px; color: #666; margin-bottom: 45px; align-self: flex-end; }
        .legend-dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 5px; }
        .legend-dot.my { background-color: var(--primary-blue); } .legend-dot.avg { background-color: #cce5ff; }
        
        .gauge-chart-wrap { width: 220px; height: 110px; position: relative; margin-bottom: 15px; }
        .gauge-svg { width: 100%; height: 100%; overflow: visible; }
        .gauge-bg-arc { fill: none; stroke: #f0f3f9; stroke-width: 24; stroke-linecap: round; }
        .gauge-my-arc { fill: none; stroke: var(--primary-blue); stroke-width: 24; stroke-linecap: round; stroke-dasharray: 251.3; stroke-dashoffset: 251.3; }
        .gauge-character { position: absolute; width: 32px; height: 32px; background-color: #00c896; border: 3px solid white; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-weight: bold; font-size: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); left: 20px; top: 100px; transform: translate(-50%, -50%); z-index: 2; }
        .gauge-avg-label { position: absolute; background: #cce5ff; color: var(--primary-blue); font-size: 11px; font-weight: bold; padding: 5px 10px; border-radius: 20px; left: 100px; top: 20px; transform: translate(-50%, -100%); white-space: nowrap; z-index: 1; }
        .gauge-avg-label::after { content: ''; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: #cce5ff transparent transparent transparent; }
        .gauge-bottom-text { text-align: center; }
        .gauge-sub-label { font-size: 14px; color: #888; margin-bottom: 5px; }
        .gauge-main-label { font-size: 22px; font-weight: bold; color: #333; }
        .gauge-main-label .highlight-blue { font-size: 28px; }
        
        .summary-text-wrap { width: 100%; flex: 1; min-width: 0; }
        .summary-title { font-size: 16px; margin-bottom: 15px; line-height: 1.6; color: var(--text-dark); text-align: center; word-break: keep-all; }
        
        .summary-desc { 
            font-size: 14px; line-height: 1.6; color: #555; background: white; padding: 15px; border-radius: 10px; 
            word-break: keep-all; white-space: nowrap; 
        }

        .bottom-details-grid { display: grid; grid-template-columns: 1.9fr 1.1fr; gap: 30px; margin-bottom: 100px; }
        .graph-header { display: flex; flex-direction: column; align-items: flex-start; margin-bottom: 20px; }
        .avg-legend { font-size: 12px; color: #666; font-weight: normal; display: flex; align-items: center; gap: 6px; background: none; padding: 0; align-self: flex-end; margin-top: 5px; }
        
        .avg-icon-visual { 
            width: 32px; height: 0; border-top: 3px dashed #aaccff; display: inline-block; 
            vertical-align: middle; position: relative; margin-right: 4px;
        }
        .avg-icon-visual::after { 
            content: ''; display: block; width: 10px; height: 10px; background-color: white; 
            border: 2px solid #aaccff; border-radius: 50%; position: absolute; top: -5px; left: 50%; transform: translateX(-50%); box-sizing: border-box;
        }
        
        .graph-container { display: flex; justify-content: space-around; align-items: flex-end; height: 200px; border-bottom: 1px solid #ddd; position: relative; padding-left: 30px; flex: 2; margin-bottom: 40px; }
        
        .y-axis-grid { position: absolute; left: 30px; right: 0; bottom: 0; top: 0; pointer-events: none; z-index: 0; }
        .grid-line { position: absolute; left: 0; right: 0; border-top: 1px solid #f0f0f0; }
        .grid-label { position: absolute; left: -30px; width: 25px; text-align: right; font-size: 11px; color: #999; transform: translateY(-50%); }
        .bar-group { display: flex; flex-direction: column; align-items: center; width: 80px; position: relative; justify-content: flex-end; height: 100%; }
        .bar { width: 36px; border-radius: 6px 6px 0 0; position: relative; height: 0px; transition: height 0.5s ease-out; z-index: 1; }
        .bar.color-1 { background-color: var(--col-vocab); } .bar.color-2 { background-color: var(--col-fact); } 
        .bar.color-3 { background-color: var(--col-crit); } .bar.color-4 { background-color: var(--col-inf); }
        .bar-value { font-size: 13px; margin-bottom: 8px; font-weight: bold; opacity: 0; transition: opacity 1s 1s; color: var(--text-dark); position: relative; z-index: 5; text-shadow: 0 0 4px rgba(255,255,255,0.8), 0 0 2px #fff; }
        .bar-group.animate .bar-value { opacity: 1; }
        .bar-label { position: absolute; bottom: -55px; font-size: 12px; width: auto; min-width: 70px; white-space: nowrap; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 5px; color: #333; font-weight: 500; }
        .label-content { display: flex; align-items: center; gap: 3px; }
        .label-icon { width: 8px; height: 8px; display: inline-block; border-radius: 2px; flex-shrink: 0; }
        .label-icon.c1 { background-color: var(--col-vocab); } .label-icon.c2 { background-color: var(--col-fact); } 
        .label-icon.c3 { background-color: var(--col-crit); } .label-icon.c4 { background-color: var(--col-inf); } 
        .graph-help-btn { display: inline-flex; width: 14px; height: 14px; background-color: #ddd; color: white; border-radius: 50%; justify-content: center; align-items: center; font-size: 10px; cursor: pointer; flex-shrink: 0; }
        .graph-help-btn:hover { background-color: #bbb; }
        
        .svg-graph-layer { position: absolute; top: 0; left: 30px; right: 0; width: calc(100% - 30px); height: 100%; pointer-events: none; z-index: 2; }
        .avg-line { fill: none; stroke: #aaccff; stroke-width: 3px; stroke-dasharray: 6, 4; transition: all 1s ease; }
        
        .avg-dot { fill: #fff; stroke: #aaccff; stroke-width: 3px; r: 6; transition: cy 1s ease; pointer-events: auto; cursor: pointer; }
        .avg-dot:hover { stroke: var(--primary-blue); stroke-width: 4px; r: 8; }
        
        .tooltip-container { position: relative; display: flex; justify-content: center; }

        .insight-container { display: flex; flex-direction: column; gap: 15px; justify-content: flex-start; height: 100%; }
        .insight-wrapper { display: flex; flex-direction: column; gap: 15px; margin-top: 0; height: 100%; }
        .insight-box { border: 1px solid #ddd; padding: 15px 20px; border-radius: 12px; text-align: center; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.05); height: 100%; display: flex; flex-direction: column; justify-content: center; }
        .insight-label { font-size: 14px; color: #888; margin-bottom: 5px; } 
        
        .insight-value { font-size: 25px; font-weight: bold; }

        .guide-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 40px; }
        .guide-card { background: #fff; border: 1px solid #eee; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .guide-header { padding: 12px; text-align: center; font-weight: 700; color: #333; font-size: 15px; }
        .level-tag { font-size: 0.9em; font-weight: normal; margin-left: 3px; }
        .guide-body { padding: 15px; font-size: 13px; line-height: 1.6; color: #555; background-color: #fcfcfc; flex: 1; word-break: keep-all; }
        .guide-card.c1 .guide-header { background-color: rgba(156, 39, 176, 0.15); color: var(--col-vocab); } 
        .guide-card.c2 .guide-header { background-color: rgba(0, 200, 150, 0.15); color: var(--col-fact); } 
        .guide-card.c3 .guide-header { background-color: rgba(255, 179, 0, 0.15); color: var(--col-crit); } 
        .guide-card.c4 .guide-header { background-color: rgba(255, 82, 82, 0.15); color: var(--col-inf); }

        .rec-container { display: flex; align-items: stretch; gap: 10px; background: #fff9f0; padding: 20px; border-radius: 15px; border: 2px dashed #ffb300; }
        .rec-group { flex: 1; background: white; border-radius: 12px; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; flex-direction: column; align-items: center; }
        .rec-title { font-size: 16px; font-weight: 700; margin-bottom: 15px; background: #ffe0b2; width: 100%; text-align: center; padding: 8px; border-radius: 6px; color: #5d4037; }
        .plus-icon { display: flex; align-items: center; justify-content: center; font-size: 30px; color: #ccc; font-weight: bold; width: 30px; }
        .program-box { border: 2px solid #ddd; border-radius: 12px; padding: 20px; text-align: center; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; background: white; transition: all 0.3s; }
        .program-box.advanced { border-color: #7c4dff; background: linear-gradient(135deg, #f8f0ff 0%, #e8eaf6 100%); box-shadow: 0 4px 10px rgba(124, 77, 255, 0.1); }
        .program-box.advanced .program-badge { color: #6200ea; font-weight: 700; background: #d1c4e9; padding: 4px 8px; border-radius: 4px; display: inline-block; }
        .program-box.advanced .program-name { color: #311b92; font-size: 19px; }
        .program-box.basic { border-color: #ff9800; background: linear-gradient(135deg, #fff8e1 0%, #fff3e0 100%); box-shadow: 0 4px 10px rgba(255, 152, 0, 0.1); }
        .program-box.basic .program-badge { color: #e65100; font-weight: 700; background: #ffe0b2; padding: 4px 8px; border-radius: 4px; display: inline-block; }
        .program-box.basic .program-name { color: #bf360c; font-size: 19px; }
        .program-badge { font-size: 12px; margin-bottom: 10px; }
        .program-name { font-size: 18px; font-weight: bold; color: var(--text-dark); margin-bottom: 5px; }
        
        .book-list { display: flex; gap: 30px; overflow-x: auto; width: 100%; padding-bottom: 5px; justify-content: center; }
        .book-item { flex: 0 0 110px; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        
        .book-cover { 
            width: 100px; height: 130px; border-radius: 16px; overflow: hidden; position: relative; 
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.06), 0 2px 8px rgba(0, 0, 0, 0.03);
            border: 1px solid rgba(0,0,0,0.04); transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); 
            background-color: #fff; transform: translateZ(0);
        }
        
        .book-cover:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(30, 125, 240, 0.15); }

        .book-cover img { width: 100%; height: 100%; object-fit: cover; display: block; }
        .book-title-on-cover { font-size: 13px; line-height: 1.3; font-weight: 800; }
        .book-title { font-size: 12px; text-align: center; line-height: 1.3; margin-top: 5px; }
        
        .btn-list { width: 100%; height: 100%; display: flex; flex-direction: column; gap: 10px; }
        .rec-btn { 
            width: 100%; flex: 1; display: flex; justify-content: center; align-items: center; 
            padding: 0 10px; background: white; border: 1px solid #ddd; 
            color: #555; font-weight: 700; border-radius: 8px; cursor: pointer; transition: 0.2s; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
        }
        .rec-btn:hover { background: #f0f8ff; border-color: #1e7df0; color: #1e7df0; transform: translateY(-2px); }
    </style>
</head>
<body>

<div class="app-container">
    <!-- GNB -->
    <div class="gnb">
        <div class="gnb-logo"><span class="logo-eli">eli</span><span class="logo-high">high</span></div>
        <div class="gnb-menu">
            <div class="gnb-item">ì „ì²´</div>
            <div class="gnb-item">ë‚˜ì˜í•™ìŠµë°©</div>
            <div class="gnb-item active">í•™êµê³µë¶€</div>
            <div class="gnb-item">ìˆ˜í•™ì •ë³µ</div>
            <div class="gnb-item">ì˜ì–´ì™„ì„±</div>
            <div class="gnb-item">íŠ¹ëª©Â·ê²½ì‹œ</div>
            <div class="gnb-item">í‰ê°€ì„¼í„°</div>
            <div class="gnb-item">ìˆ˜í–‰í‰ê°€+</div>
            <div class="gnb-item">ê¸€ë¡œë²Œë¦¬ë”ì‹­</div>
        </div>
    </div>

    <!-- ë©”ì¸ í™”ë©´ (New Dashboard) -->
    <div id="main-screen">
        <div class="dashboard-grid">
            
            <!-- Left Column: ê³¼ëª© ë©”ë‰´ -->
            <div class="left-sidebar">
                <div class="subject-menu-box">
                    <div class="subject-header">
                        ğŸ¯ í•™êµê³µë¶€
                        <span style="font-size:12px; color:#888; font-weight:400;">ì´ˆ4 âˆ¨</span>
                    </div>
                    <div class="subject-list">
                        <div class="subject-item"><span class="subject-icon">ğŸ“š</span> êµ­ì–´</div>
                        <div class="subject-item"><span class="subject-icon">â—</span> ìˆ˜í•™</div>
                        <div class="subject-item"><span class="subject-icon">ğŸ›ï¸</span> ì‚¬íšŒ</div>
                        <div class="subject-item"><span class="subject-icon">ğŸ§ª</span> ê³¼í•™</div>
                        <div class="subject-item"><span class="subject-icon">ğŸ”¤</span> ì˜ì–´</div>
                    </div>
                </div>
                <div class="story-banner">
                    <div class="story-title">ì˜¤ëŠ˜ë„<br>ì¶œê·¼í–ˆì–´ìš”!</div>
                    <div class="story-sub">ì½˜í…ì¸  ì œì‘ ìŠ¤í† ë¦¬ âœ‰ï¸</div>
                </div>
            </div>

            <!-- Center Column: ë©”ì¸ í”¼ë“œ -->
            <div class="center-feed">
                <!-- Top: Hero Banner (ë¬¸í•´ë ¥ í–¥ìƒ í”„ë¡œì íŠ¸) -->
                <div class="main-banner-card hero-banner" onclick="location.href='contents/intro.html'">
                    <div class="hero-bg-pattern"></div>
                    
                    <!-- Left: í…ìŠ¤íŠ¸ ì •ë³´ -->
                    <div class="banner-text-group">
                        <div class="hero-tag">NEW</div>
                        <div class="hero-main-title">ì—˜ë¦¬í•˜ì´<br>ë¬¸í•´ë ¥ í–¥ìƒ í”„ë¡œì íŠ¸</div>
                        <div class="hero-sub-title">ì˜¤ëŠ˜ 8ë¶„ ë¬¸í•´! ëª¨ë“  í•™ìŠµì˜ ë°‘ë°”íƒ•ì€ ë¬¸í•´ë ¥!</div>
                    </div>
                    
                    <!-- Right: ì•„ì´ì½˜ & ì•¡ì…˜ ë²„íŠ¼ -->
                    <div class="banner-action-group">
                        <div class="hero-icon-visual">ğŸ†</div>
                        <!-- ìš°ì¸¡ í•˜ë‹¨ Click/ë°”ë¡œê°€ê¸° ë²„íŠ¼ -->
                        <div class="banner-cta-btn hero-cta">
                            í”„ë¡œì íŠ¸ ë³´ê¸° <span style="font-size: 16px;">â–¶</span>
                        </div>
                    </div>
                </div>

                <!-- Middle: Diagnostic Trigger (M-KLT ì§„ë‹¨ ê²€ì‚¬) -->
                <div class="main-banner-card diagnostic-trigger-banner" onclick="startDiagnosticTest()">
                    <div class="diag-bg-circle"></div>

                    <!-- Left: í…ìŠ¤íŠ¸ ì •ë³´ -->
                    <div class="banner-text-group">
                        <div class="hero-tag">NEW</div>
                        <div class="diag-title">ì—˜ë¦¬í•˜ì´<br>ë¬¸í•´ë ¥ M-KLT ì§„ë‹¨ ê²€ì‚¬</div>
                        <div class="diag-sub">ì´ˆë“± ë¬¸í•´ë ¥, ì •í™•í•œ ì§„ë‹¨ìœ¼ë¡œ ì œëŒ€ë¡œ í‚¤ìš°ê¸°</div>
                    </div>
                    
                    <!-- Right: ì•„ì´ì½˜ & ì•¡ì…˜ ë²„íŠ¼ -->
                    <div class="banner-action-group">
                        <div class="diag-icon-visual">ğŸ“</div>
                        <!-- ìš°ì¸¡ í•˜ë‹¨ Click/ë°”ë¡œê°€ê¸° ë²„íŠ¼ -->
                        <div class="banner-cta-btn diag-cta">
                            ê²€ì‚¬ ì‹œì‘í•˜ê¸° <span style="font-size: 16px;">â–¶</span>
                        </div>
                    </div>
                </div>

                <!-- Bottom: Sub Banners -->
                <div class="bottom-banner-row">
                    <div class="sub-banner sb-1">
                        <div class="sb-title">ì˜ì–´ ì•ŒìŒ¤ì˜<br>ì›ë”ëœë“œ</div>
                        <div class="sb-desc">ë³´ë¬¼ì´ ê°€ë“í•œ ì˜ì–´ ëª¨í—˜!</div>
                        <div class="sb-img">ğŸ°</div>
                    </div>
                    <div class="sub-banner sb-2">
                        <div class="sb-title">ëª…ë‘ ëª¨ë“œ<br>ON</div>
                        <div class="sb-desc">ì¬ë¯¸ìˆëŠ” í•™êµìƒí™œ íŒ</div>
                        <div class="sb-img">ğŸ˜„</div>
                    </div>
                </div>
            </div>

            <!-- Right Column: ìœ„ì ¯ & ì•± ë°°ë„ˆ -->
            <div class="right-sidebar">
                <!-- ìœ„ì ¯ ì„¹ì…˜ -->
                <div class="plus-box">
                    <div class="widget-title">ğŸ”” í•™êµê³µë¶€ PLUS+</div>
                    <div class="plus-grid">
                        <div class="plus-item"><span class="pi-icon">ğŸ‡¨ğŸ‡³</span> HSK</div>
                        <div class="plus-item"><span class="pi-icon">ğŸ“œ</span> í•œêµ­ì‚¬</div>
                        <div class="plus-item"><span class="pi-icon">ğŸ‰</span> í•œìì‹œí—˜</div>
                        <div class="plus-item"><span class="pi-icon">ğŸ“º</span> êµê³¼íŠ¹ê°•</div>
                        <div class="plus-item"><span class="pi-icon">ğŸ«</span> í•™êµìƒí™œ</div>
                        <div class="plus-item"><span class="pi-icon">â›‘ï¸</span> ì•ˆì „ìƒí™œ</div>
                    </div>
                </div>

                <!-- ì»¬ëŸ¬í’€ ì•± ë°°ë„ˆ ê·¸ë¦¬ë“œ -->
                <div class="app-grid">
                    <div class="app-card bg-lime">ë„ì „!<br>ì–´íœ˜ì™•</div>
                    <div class="app-card bg-purple">ë˜ë°•ë˜ë°•<br>í•œê¸€ì“°ê¸°</div>
                    <div class="app-card bg-sky">ì—˜ë¦¬ëª¬<br>ê°€ë‚˜ë‹¤</div>
                    <div class="app-card bg-brown">NEW<br>ì—˜ë¦¬ ë°›ì•„ì“°ê¸°</div>
                    <div class="app-card bg-teal">ë„ì „!<br>í•œìì™•</div>
                    <div class="app-card bg-gold">ì¹ êµ<br>ë°©íƒˆì¶œ</div>
                </div>
            </div>

        </div>
    </div>

    <!-- ë¡œë”© í™”ë©´ -->
    <div id="loading-screen">
        <div class="loading-icon">
            <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 55 C15 25 25 10 50 10 C75 10 85 25 85 55" stroke="#00b0ff" stroke-width="8" stroke-linecap="round"/>
                <rect x="5" y="45" width="12" height="24" rx="4" fill="#0091ea"/>
                <rect x="83" y="45" width="12" height="24" rx="4" fill="#0091ea"/>
                <circle cx="50" cy="55" r="35" fill="white" stroke="#333" stroke-width="2.5"/>
                <path d="M22 50 C22 38 32 32 50 32 C68 32 78 38 78 50 C78 65 68 73 50 73 C32 73 22 65 22 50 Z" fill="#455a64"/>
                <circle cx="38" cy="50" r="5" fill="#00e5ff"/>
                <circle cx="62" cy="50" r="5" fill="#00e5ff"/>
                <path d="M42 60 Q50 66 58 60" stroke="#00e5ff" stroke-width="3" stroke-linecap="round"/>
                <rect x="46" y="22" width="8" height="3" rx="1.5" fill="#333"/>
                <path d="M10 55 Q15 85 45 78" stroke="#333" stroke-width="2.5" stroke-linecap="round" fill="none"/>
            </svg>
        </div>
        <div class="loading-text">ê²°ê³¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤.</div>
        <div class="loading-sub">AIê°€ <strong>[ê¹€ì—˜ë¦¬]ë‹˜</strong>ì˜ ë‹µì•ˆì„ ì±„ì í•˜ê³  ìˆì–´ìš”.</div>
        <div class="loading-track">
            <div class="loading-bar" id="loading-bar"></div>
        </div>
    </div>

    <!-- í€´ì¦ˆ í™”ë©´ (ê°œì„ ëœ UI) -->
    <div id="quiz-screen">
        <!-- 1. Header -->
        <div class="quiz-header">
            <div class="quiz-title-area">
                <div class="quiz-title-logo">M-KLT</div>
                <div class="quiz-main-title">ë¬¸í•´ë ¥ ì§„ë‹¨ ê²€ì‚¬</div>
                
                <!-- [ìˆ˜ì •] Progress Indicators Moved next to Title -->
                <div class="quiz-progress-wrap">
                    <!-- Badge Vocab -->
                    <div class="progress-pill active" id="badge-vocab">
                        <i>ğŸ§©</i> ì–´íœ˜ë ¥
                    </div>
                    <!-- Badge Reading -->
                    <div class="progress-pill" id="badge-reading">
                        <i>ğŸ“–</i> ì§€ë¬¸ ë…í•´
                    </div>
                </div>
            </div>
            
            <div style="font-size:14px; font-weight:700; color:var(--text-gray);">
                <span id="progress-text">1 / 2</span>
            </div>
        </div>

        <!-- 2. Body -->
        <div class="quiz-body">
            <!-- Question 1: Vocabulary (Center Type) -->
            <div class="question-step active" id="q1">
                <div class="center-layout-container">
                    <!-- [ìˆ˜ì •] ë°°ê²½ìƒ‰ íŒŒë€ìƒ‰ìœ¼ë¡œ ë³€ê²½ -->
                    <div class="q-badge" style="background:var(--primary-blue);">ë¬¸ì œ 01</div>
                    <div class="q-text-large">
                        <span style="color:#000">|</span> ë³´ê¸° <span style="color:#000">|</span>ì˜ ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì•Œë§ì€ ë§ì€ ë¬´ì—‡ì¸ê°€ìš”?
                    </div>

                    <div class="vocab-box-wrapper">
                        <!-- [ìˆ˜ì •] ë³´ê¸° ë¼ë²¨ ê°œì„  (ì•„ì´ì½˜í˜• ë±ƒì§€) - Q ì œê±°, í…ìŠ¤íŠ¸ë§Œ -->
                        <div class="vocab-label-badge">
                            ë³´ê¸°
                        </div>
                        
                        <!-- [ìˆ˜ì •] í…ìŠ¤íŠ¸ í•œ ì¤„ ë° ê³µë°± ì¶”ê°€ -->
                        <div class="vocab-sentence">
                            ì¹œêµ¬ì™€ ë…¸ëŠë¼ ìˆ™ì œí•˜ëŠ” ê²ƒì„
                            <span class="vocab-blank"> &nbsp;&nbsp;&nbsp;&nbsp; </span>
                            ë§ì•˜ë‹¤.
                        </div>
                    </div>

                    <div class="answer-grid">
                        <button class="answer-card-btn" onclick="selectAnswer(this, 1)">ìƒê³ </button>
                        <button class="answer-card-btn" onclick="selectAnswer(this, 1)">ìŠê³ </button>
                        <button class="answer-card-btn" onclick="selectAnswer(this, 1)">ì…ê³ </button>
                    </div>
                </div>
            </div>

            <!-- Question 2: Reading (Split Type) -->
            <div class="question-step" id="q2">
                <div class="split-layout-container">
                    <!-- Left: Passage Viewer -->
                    <div class="passage-viewer">
                        <div class="passage-paper">
                            <div class="passage-title">ìì—°ì˜ ì²­ì†Œë¶€, íŒŒë¦¬ì˜ í•œì‚´ì´</div>
                            <div class="passage-content">
                                <p class="p-indent">
                                    íŒŒë¦¬ëŠ” ì™œ ìŒì‹ë¬¼ì´ë‚˜ ì“°ë ˆê¸°í†µ ê·¼ì²˜ì— ìì£¼ ëª¨ì¼ê¹Œìš”? ì´ê²ƒì€ íŒŒë¦¬ì˜ í•œì‚´ì´ ê³¼ì •ê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤. íŒŒë¦¬ëŠ” ë‚˜ë¹„ë‚˜ ë²Œì²˜ëŸ¼ ê³¤ì¶©ì— ì†í•˜ëŠ” ì‘ì€ ë™ë¬¼ì…ë‹ˆë‹¤. íŒŒë¦¬ëŠ” <span class="highlight-word">ì•Œ&rarr;ì• ë²Œë ˆ&rarr;ë²ˆë°ê¸°&rarr;ì–´ë¥¸ë²Œë ˆ</span>ì˜ ë„¤ ë‹¨ê³„ë¥¼ ê±°ì¹˜ëŠ” í•œì‚´ì´ ê³¼ì •ì„ ê²ªëŠ”ë°, ì´ ê³¼ì •ì„ â€˜ì™„ì „ íƒˆë°”ê¿ˆâ€™ì´ë¼ê³  í•©ë‹ˆë‹¤.
                                </p>
                                <p class="p-indent">
                                    íŒŒë¦¬ì˜ í•œì‚´ì´ëŠ” ì©ì€ ìŒì‹ë¬¼ì´ë‚˜ ë™ë¬¼ì˜ ë°°ì„¤ë¬¼ì— ì•Œì„ ë‚³ìœ¼ë©° ì‹œì‘ë©ë‹ˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ íŒŒë¦¬ê°€ ìŒì‹ë¬¼ì´ë‚˜ ì“°ë ˆê¸°í†µ ê·¼ì²˜ì—ì„œ ìì£¼ ë³´ì´ëŠ” ì´ìœ ì…ë‹ˆë‹¤. ì•Œì´ ë¶€í™”í•˜ë©´ â€˜êµ¬ë”ê¸°â€™ë¼ê³  ë¶ˆë¦¬ëŠ” ì• ë²Œë ˆê°€ ë˜ëŠ”ë°, êµ¬ë”ê¸°ëŠ” ìì‹ ì´ íƒœì–´ë‚œ ê³³ ì£¼ë³€ì˜ ì©ì€ ë¬¼ì§ˆì„ ë¨¹ìœ¼ë©° ìëë‹ˆë‹¤. ì´ ê³¼ì •ì€ ì£¼ë³€ì˜ ë”ëŸ¬ìš´ ì°Œêº¼ê¸°ë¥¼ ì¤„ì´ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. êµ¬ë”ê¸°ëŠ” í—ˆë¬¼ì„ ë²—ìœ¼ë©° ëª¸ì§‘ì´ ì»¤ì§€ê³ , ëª¸ì§‘ì´ ì¶©ë¶„íˆ ì»¤ì§€ë©´ ì›€ì§ì„ì„ ë©ˆì¶”ê³  ë²ˆë°ê¸°ê°€ ë©ë‹ˆë‹¤. ë²ˆë°ê¸° ì†ì—ì„œ ì• ë²Œë ˆì˜ ëª¸ì´ ì–´ë¥¸ë²Œë ˆì˜ ëª¨ìŠµìœ¼ë¡œ ë°”ë€Œë©°, ì„±ì¥ì´ ëë‚˜ë©´ ìš°ë¦¬ê°€ ì•„ëŠ” íŒŒë¦¬ì˜ ëª¨ìŠµì´ ë©ë‹ˆë‹¤.
                                </p>
                                <p class="p-indent">
                                    ë§ì€ ì‚¬ëŒë“¤ì´ íŒŒë¦¬ë¥¼ ê·€ì°®ê±°ë‚˜ ë”ëŸ¬ìš´ í•´ì¶©ì´ë¼ê³  ìƒê°í•˜ì§€ë§Œ, ì‚¬ì‹¤ íŒŒë¦¬ëŠ” ìë¼ëŠ” ë™ì•ˆ ì©ì€ ê²ƒì„ ë¨¹ì–´ ì—†ì• ê¸° ë•Œë¬¸ì— ìì—°ì„ ê¹¨ë—í•˜ê²Œ ë§Œë“œëŠ” ë° ë„ì›€ì„ ì£¼ëŠ” íŠ¹ë³„í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ê³¼í•™ìë“¤ì€ íŒŒë¦¬ë¥¼ <span class="highlight-word">â€˜ìì—°ì˜ ì²­ì†Œë¶€â€™</span>ë¼ê³  ë¶€ë¥´ë©°, ìµœê·¼ì—ëŠ” êµ¬ë”ê¸°ë¥¼ ì´ìš©í•´ ìŒì‹ë¬¼ ì“°ë ˆê¸°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—°êµ¬ë„ ì´ë£¨ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right: Question -->
                    <div class="problem-solver">
                        <div class="q-badge" style="background:var(--primary-blue);">ë¬¸ì œ 02</div>
                        <div class="prob-header">
                            <div class="prob-q-text">
                                ì´ ê¸€ì—ì„œ ê°€ì¥ ì¤‘ì‹¬ì´ ë˜ëŠ” ë§ì€ ë¬´ì—‡ì¸ê°€ìš”?
                            </div>
                        </div>
                        
                        <div class="choice-stack">
                            <button class="choice-row-btn" onclick="selectAnswer(this, 2)">
                                <div class="choice-num">1</div>
                                <span>íŒŒë¦¬ì˜ í•œì‚´ì´</span>
                            </button>
                            <button class="choice-row-btn" onclick="selectAnswer(this, 2)">
                                <div class="choice-num">2</div>
                                <span>ì• ë²Œë ˆ</span>
                            </button>
                            <button class="choice-row-btn" onclick="selectAnswer(this, 2)">
                                <div class="choice-num">3</div>
                                <span>ì‘ì€ ë™ë¬¼</span>
                            </button>
                            <button class="choice-row-btn" onclick="selectAnswer(this, 2)">
                                <div class="choice-num">4</div>
                                <span>ì²­ì†Œë¶€</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Footer -->
        <div class="quiz-footer">
            <!-- [ìˆ˜ì •] êº½ì‡  ì•„ì´ì½˜ ì ìš© -->
            <button class="next-btn-pill" id="quiz-next-btn" onclick="nextStep()">
                ë‹¤ìŒ ë¬¸ì œ 
                <span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </span>
            </button>
        </div>
    </div>

    <!-- ê²°ê³¼ ë¦¬í¬íŠ¸ í™”ë©´ -->
    <div id="result-screen">
        <div class="header-res">
            <h1><span>ì—˜ë¦¬í•˜ì´</span> ë¬¸í•´ë ¥ M-KLT ì§„ë‹¨ ê²€ì‚¬ ê²°ê³¼ ë¦¬í¬íŠ¸</h1>
            <div class="close-btn" onclick="location.reload()">âœ•</div>
        </div>

        <div class="info-bar">
            <div class="info-item">
                <span class="info-badge">ê²€ì‚¬ í•™ë…„</span>
                <span class="info-text" id="grade-text">ì´ˆë“± 4í•™ë…„</span>
            </div>
            <div class="info-item">
                <span class="info-badge">ê²€ì‚¬ì¼</span>
                <span class="info-text" id="date-text">2026.12.11</span>
            </div>
            <div class="info-item relative-container">
                <span class="info-badge">ì§„ë‹¨ ë ˆë²¨</span>
                <span class="info-text" id="level-text">ë¨¸íë¦¬ ğŸ’</span>
                <button class="level-guide-btn" onclick="togglePopup(event, 'level-popup')">ë ˆë²¨ ë“±ê¸‰í‘œ</button>
                <div id="level-popup" class="level-dropdown">
                    <div class="level-item">ë£¨ë‚˜ ğŸŒ•</div>
                    <div class="level-item">ë§ˆìŠ¤ ğŸ”¥</div>
                    <div class="level-item active">ë¨¸íë¦¬ ğŸ’</div>
                    <div class="level-item">ì£¼í”¼í„° ğŸŒ³</div>
                    <div class="level-item">ë¹„ë„ˆìŠ¤ ğŸ’–</div>
                    <div class="level-item">ìƒˆí„´ ğŸª</div>
                </div>
            </div>
            
            <div class="info-item relative-container">
                <span class="info-badge">KLQ ì§€ìˆ˜ <span class="q-mark-icon" onclick="togglePopup(event, 'klq-tooltip')">?</span></span>
                <span class="info-text" id="klq-text">4.8</span>
                <div id="klq-tooltip" class="klq-tooltip">
                    KLQ(Korean Literacy Quotient)ëŠ”<br>
                    â€˜ê¸€ì„ ì½ê³  ì´í•´í•˜ëŠ” í˜â€™ì„ ë‚˜íƒ€ë‚´ëŠ” ì ìˆ˜ì˜ˆìš”.
                </div>
            </div>
            <div class="info-item right-end">
                <select class="dropdown-select" id="history-select" onchange="changeReport()">
                    <option value="default" selected disabled hidden>ì´ì „ ê²°ê³¼ ë³´ê¸°</option>
                    <option value="current">2026.12.11</option>
                    <option value="prev">2025.10.04</option>
                </select>
            </div>
        </div>

        <div class="top-summary-container">
            <div class="summary-left">
                <!-- SVG ê¸°ë°˜ ë„ë„› ì°¨íŠ¸ -->
                <div class="donut-chart-wrap">
                    <div style="position: relative; width: 180px; height: 180px; margin: 0 auto;">
                        <svg class="donut-chart-svg" viewBox="0 0 180 180">
                            <circle class="donut-bg-ring" cx="90" cy="90" r="75"></circle>
                            <circle class="donut-prog-ring" id="scoreDonut" cx="90" cy="90" r="75"></circle>
                        </svg>
                        <div class="donut-text" id="donutPercentText">0%</div>
                    </div>
                    <div class="donut-label" id="correct-text">ì´ 20ë¬¸í•­ ì¤‘ [17]ë¬¸í•­ ì •ë‹µ</div>
                </div>
                <div class="summary-text-wrap">
                    <div class="summary-title">
                        <span class="highlight-blue">[ê¹€ì—˜ë¦¬]</span>ë‹˜ì˜ ë¬¸í•´ë ¥ ìˆ˜ì¤€ì€ <span class="highlight-blue" id="summary-level">[ë¨¸íë¦¬ğŸ’]</span>,<br>
                        KLQ ì§€ìˆ˜ëŠ” <span class="highlight-blue" id="summary-klq">[4.8]</span>ë¡œ <br>
                        <span id="grade-level-text">ì´ˆë“± 4í•™ë…„ 8ê°œì›” ìˆ˜ì¤€</span>ì— í•´ë‹¹í•˜ë©°,<br>
                        ì¶”ì²œ í•™ìŠµ ì½”ìŠ¤ëŠ” <span class="highlight-blue" id="summary-course">[ì‘ìš© ì½”ìŠ¤]</span>ì…ë‹ˆë‹¤.
                    </div>
                    <div class="summary-desc" id="summary-desc">
                        <strong>ê¹€ì—˜ë¦¬</strong>ë‹˜ì˜ ì–´íœ˜ë ¥ê³¼ ë¹„íŒì  ë…í•´ë ¥ì€ ë§¤ìš° ë›°ì–´ë‚˜ìš”! <br> ì „ì²´ì ìœ¼ë¡œ ë¬¸í—¤ë ¥ ì‹¤ë ¥ì´ ê³ ë¥´ê²Œ ì¢‹ì€ í¸ì´ì§€ë§Œ, <br> ì¶”ë¡ ì  ë…í•´ë ¥ë§Œ ê°•í™”í•˜ë©´ ë” ë†’ì€ ë‹¨ê³„ë¡œ ê°ˆ ìˆ˜ ìˆì–´ìš”!
                    </div>
                </div>
            </div>
            <div class="summary-right">
                <div class="gauge-chart-container">
                    <div class="gauge-legend"><div><span class="legend-dot my"></span> ë‚˜ì˜ í’€ì´ ì‹œê°„</div><div><span class="legend-dot avg"></span> í‰ê·  í’€ì´ ì‹œê°„</div></div>
                    <div class="gauge-chart-wrap">
                        <div class="gauge-character" id="gaugeChar"><span>ë‚˜</span></div>
                        <svg class="gauge-svg" viewBox="0 0 200 105"><path class="gauge-bg-arc" d="M 20 100 A 80 80 0 0 1 180 100" /><path class="gauge-my-arc" d="M 20 100 A 80 80 0 0 1 180 100" /></svg>
                        <div class="gauge-avg-label" id="gaugeAvgLabel">36ë¶„</div>
                    </div>
                    <div class="gauge-bottom-text"><div class="gauge-sub-label">ë‚˜ì˜ í’€ì´ ì‹œê°„</div><div class="gauge-main-label"><span class="highlight-blue" id="my-time">23</span>ë¶„ / 50ë¶„</div></div>
                </div>
            </div>
        </div>

        <div class="bottom-details-grid">
            <div>
                <div class="graph-header">
                    <div class="section-title-pill">ì˜ì—­ë³„ ìˆ˜ì¤€ ê·¸ë˜í”„</div>
                    <div class="avg-legend"><span class="avg-icon-visual"></span>&#58;&#160; í•™ë…„ í‰ê·  ì ìˆ˜</div>
                </div>
                <div class="graph-container">
                    <div id="graph-avg-tooltip" class="klq-tooltip" style="width: auto; padding: 6px 10px; min-width: 140px; transform: translateX(-50%); white-space: nowrap;"></div>

                    <div class="y-axis-grid"><div class="grid-line" style="bottom:0%"></div><div class="grid-label" style="bottom:0%">0</div><div class="grid-line" style="bottom:50%"></div><div class="grid-label" style="bottom:50%">50</div><div class="grid-line" style="bottom:100%"></div><div class="grid-label" style="bottom:100%">100</div></div>
                    
                    <svg class="svg-graph-layer" viewBox="0 0 500 200" preserveAspectRatio="none">
                        <polyline class="avg-line" points="62.5,47 187.5,120 312.5,100 437.5,40" />
                        <circle class="avg-dot" cx="62.5" cy="47" />
                        <circle class="avg-dot" cx="187.5" cy="120" />
                        <circle class="avg-dot" cx="312.5" cy="100" />
                        <circle class="avg-dot" cx="437.5" cy="40" />
                    </svg>

                    <!-- ë§‰ëŒ€ ê·¸ë˜í”„ ì˜ì—­ -->
                    <div class="bar-group"><span class="bar-value" id="score-vocab">95</span><div class="bar color-1" id="bar-vocab"></div>
                        <div class="tooltip-container">
                            <div class="bar-label">
                                <div class="label-content"><span class="label-icon c1"></span>ì–´íœ˜ë ¥</div>
                                <span class="graph-help-btn" onclick="togglePopup(event, 't1')">?</span>
                            </div>
                            <span class="tooltip-text" id="t1">ë‚±ë§ì˜ ì •í™•í•œ ëœ»ì„ ì•Œê³ , ë¬¸ë§¥ì— ë§ê²Œ ì ì ˆíˆ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥</span>
                        </div>
                    </div>
                    <div class="bar-group"><span class="bar-value" id="score-fact">82</span><div class="bar color-2" id="bar-fact"></div>
                        <div class="tooltip-container">
                            <div class="bar-label">
                                <div class="label-content"><span class="label-icon c2"></span>ì‚¬ì‹¤ì  ë…í•´ë ¥</div>
                                <span class="graph-help-btn" onclick="togglePopup(event, 't2')">?</span>
                            </div>
                            <span class="tooltip-text" id="t2">ê¸€ì— ë“œëŸ¬ë‚œ ì •ë³´ë¥¼ ìˆëŠ” ê·¸ëŒ€ë¡œ ì •í™•í•˜ê²Œ íŒŒì•…í•˜ëŠ” ëŠ¥ë ¥</span>
                        </div>
                    </div>
                    <div class="bar-group"><span class="bar-value" id="score-crit">87</span><div class="bar color-3" id="bar-crit"></div>
                        <div class="tooltip-container">
                            <div class="bar-label">
                                <div class="label-content"><span class="label-icon c3"></span>ë¹„íŒì  ë…í•´ë ¥</div>
                                <span class="graph-help-btn" onclick="togglePopup(event, 't3')">?</span>
                            </div>
                            <span class="tooltip-text" id="t3">ê¸€ì“´ì´ì˜ ì£¼ì¥ì´ë‚˜ ì˜ê²¬ì˜ íƒ€ë‹¹ì„±ì„ ë”°ì ¸ë³´ê³ , ìì‹ ì˜ ê´€ì ì—ì„œ í‰ê°€í•˜ëŠ” ëŠ¥ë ¥</span>
                        </div>
                    </div>
                    <div class="bar-group"><span class="bar-value" id="score-inf">50</span><div class="bar color-4" id="bar-inf"></div>
                        <div class="tooltip-container">
                            <div class="bar-label">
                                <div class="label-content"><span class="label-icon c4"></span>ì¶”ë¡ ì  ë…í•´ë ¥</div>
                                <span class="graph-help-btn" onclick="togglePopup(event, 't4')">?</span>
                            </div>
                            <span class="tooltip-text" id="t4">ê¸€ì— ì§ì ‘ ë“œëŸ¬ë‚˜ì§€ ì•Šì€ ë‚´ìš©ì„ ë‹¨ì„œë¥¼ í†µí•´ ë¯¸ë£¨ì–´ ì§ì‘í•˜ëŠ” ëŠ¥ë ¥</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="insight-container">
                <div class="section-title-pill">ë¶„ì„ ê²°ê³¼</div>
                <div class="insight-wrapper">
                    <div class="insight-box">
                        <div class="insight-label">ê°€ì¥ ì˜í•˜ëŠ” ì˜ì—­</div>
                        <div class="insight-value" id="insight-best" style="color:var(--col-vocab)">â­ ì–´íœ˜ë ¥</div>
                    </div>
                    <div class="insight-box">
                        <div class="insight-label">ê°€ì¥ ëª»í•˜ëŠ” ì˜ì—­</div>
                        <div class="insight-value" id="insight-worst" style="color:var(--col-inf)">âš  ì¶”ë¡ ì  ë…í•´ë ¥</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section-title-pill">ì˜ì—­ë³„ í•™ìŠµ ê°€ì´ë“œ</div>
        <div class="guide-grid">
            <div class="guide-card c1"><div class="guide-header" id="header-vocab">ì–´íœ˜ë ¥</div><div class="guide-body" id="guide-vocab"></div></div>
            <div class="guide-card c2"><div class="guide-header" id="header-fact">ì‚¬ì‹¤ì  ë…í•´ë ¥</div><div class="guide-body" id="guide-fact"></div></div>
            <div class="guide-card c3"><div class="guide-header" id="header-crit">ë¹„íŒì  ë…í•´ë ¥</div><div class="guide-body" id="guide-crit"></div></div>
            <div class="guide-card c4"><div class="guide-header" id="header-inf">ì¶”ë¡ ì  ë…í•´ë ¥</div><div class="guide-body" id="guide-inf"></div></div>
        </div>

        <div class="section-title-pill">ìˆ˜ì¤€ë³„ ì¶”ì²œ ì½˜í…ì¸ </div>
        <div class="rec-container">
            <div class="rec-group"><div class="rec-title">ë¬¸í•´ë ¥ í”„ë¡œê·¸ë¨</div>
                <div class="program-box advanced" id="rec-prog-box">
                    <span class="program-badge" id="rec-prog-badge">&lt;ì‘ìš© ì½”ìŠ¤&gt;</span>
                    <div class="program-name" id="rec-prog-name">ğŸš€ ë¬¸í•´ë ¥ ì—…ê·¸ë ˆì´ë“œ</div>
                    <div style="font-size:13px; color:#666; margin-top:10px;" id="rec-prog-desc">ë‹¤ì–‘í•œ ì§€ë¬¸ ì½ê¸° í›ˆë ¨</div>
                </div>
            </div>
            <div class="plus-icon">+</div>
            <div class="rec-group"><div class="rec-title">í•™êµê³µë¶€ í”ŒëŸ¬ìŠ¤</div>
                <div class="book-list" id="rec-book-list"></div>
            </div>
            <div class="plus-icon">+</div>
            <div class="rec-group"><div class="rec-title">ë¹„êµê³¼ ì½˜í…ì¸ </div><div class="btn-list"><button class="rec-btn">ğŸ“š ì—˜ë¦¬í•˜ì´ ë¶í´ëŸ½ ğŸ“š</button><button class="rec-btn">ğŸŒ ê¸€ë¡œë²Œ ë¦¬ë”ì‹­ ğŸ¤</button><button class="rec-btn">ğŸ“ ìˆ˜í–‰í‰ê°€+ ğŸ’¯</button></div></div>
        </div>
    </div>
</div>

<div class="copyright-footer">
    Â© 2025 ìœ ì´ˆì¤‘ì‚¬ì—…ë³¸ë¶€ ìœ ì´ˆë“±ì»¨í…ì¸ ê¸°íšë¶€ë¬¸ ë©€í‹°ë¯¸ë””ì–´ê¸°íšíŒ€. All Rights Reserved.
</div>

<script>
    /* =========================================
       1. ìµœì í™”ëœ ë°ì´í„° ë° ì „ì—­ ë³€ìˆ˜
       ========================================= */
    let currentStep = 1; 
    const totalSteps = 2;
    let audioCtx = null; // ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ Lazy Init

    // ë¦¬í¬íŠ¸ ë°ì´í„°
    const reportData = {
        current: {
            date: '2026.12.11', grade: 'ì´ˆë“± 4í•™ë…„', level: 'ë¨¸íë¦¬ ğŸ’', klq: '4.8',
            correct: 17, time: 23, scores: [95, 82, 87, 50], avgScores: [50, 65, 45, 40],
            summaryLevel: '[ë¨¸íë¦¬ğŸ’]', summaryKlq: '[4.8]', summaryCourse: '[ì‘ìš© ì½”ìŠ¤]',
            gradeLevel: "ì´ˆë“± 4í•™ë…„ 8ê°œì›” ìˆ˜ì¤€",
            desc: "<strong>ê¹€ì—˜ë¦¬</strong>ë‹˜ì€ ì–´íœ˜ë ¥ê³¼ ì‚¬ì‹¤ì  ë…í•´ë ¥ì´ ì•„ì£¼ ë›°ì–´ë‚˜ìš”. <br> ê¸€ì„ ì½ê³  ì¤‘ìš”í•œ ë‚´ìš©ì„ ì°¨ë¶„í•˜ê²Œ ì´í•´í•˜ëŠ” í˜ì´ ì˜ ìë¦¬ ì¡í˜€ ìˆì–´ìš”. <br> ì´ì œ ì¶”ë¡ ì  ë…í•´ë ¥ë§Œ ì¡°ê¸ˆ ë” í‚¤ìš°ë©´, í•œ ë‹¨ê³„ ë” ì„±ì¥í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.",
            bestArea: { text: "â­ ì–´íœ˜ë ¥", color: "var(--col-vocab)" },
            worstArea: { text: "âš  ì¶”ë¡ ì  ë…í•´ë ¥", color: "var(--col-inf)" },
            guideLevels: { vocab: "(ë§¤ìš° ìš°ìˆ˜)", fact: "(ìš°ìˆ˜)", crit: "(ìš°ìˆ˜)", inf: "(ë³´ì™„ í•„ìš”)" },
            guides: {
                vocab: "êµê³¼ì„œì™€ ì¼ìƒì—ì„œ ì“°ëŠ” ì–´íœ˜ë¥¼ ì•„ì£¼ ì •í™•í•˜ê²Œ ì´í•´í•˜ê³  ìˆì–´ìš”. ì´ì œëŠ” ìœ ì˜ì–´, ë°˜ì˜ì–´, ë‹¤ì˜ì–´ì²˜ëŸ¼ ë‹¨ì–´ë“¤ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì‚´í´ë³´ë©° ì–´íœ˜ë§ì„ ë„“í˜€ ë³´ì„¸ìš”. í•œìì–´ì˜ ì†ëœ»ì„ ìµíˆê±°ë‚˜ ê´€ìš© í‘œí˜„ì„ í•¨ê»˜ ê³µë¶€í•˜ë©´ ì–´íœ˜ê°€ ë” í’ë¶€í•´ì ¸ìš”. ë…ì„œí•  ë•Œ ëª¨ë¥´ëŠ” ë‹¨ì–´ê°€ ë‚˜ì˜¤ë©´ ë¬¸ë§¥ìœ¼ë¡œ ì§ì‘í•´ ë³¸ ë’¤ ì‚¬ì „ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ìŠµê´€ì„ ê³„ì† ìœ ì§€í•´ ë³´ì„¸ìš”.",
                fact: "ê¸€ì˜ í•µì‹¬ ë‚´ìš©ê³¼ ì„¸ë¶€ ì •ë³´ë¥¼ ë§¤ìš° ì •í™•í•˜ê²Œ íŒŒì•…í•˜ê³  ìˆì–´ìš”. ë¬¸ë‹¨ë³„ ì¤‘ì‹¬ ë¬¸ì¥ì„ ì°¾ê±°ë‚˜ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë¬¶ì–´ ì •ë¦¬í•˜ëŠ” ì—°ìŠµì„ ì´ì–´ê°€ë©´ ë” íƒ„íƒ„í•œ ë…í•´ë ¥ì´ ìƒê²¨ìš”. ê¸€ì˜ êµ¬ì¡°ë¥¼ ì‚´í”¼ë©° â€˜ë¬´ì—‡ì´ ë¨¼ì €, ë‹¤ìŒì€ ë¬´ì—‡ì¸ì§€â€™ë¥¼ ìƒê°í•´ ì½ìœ¼ë©´ ë³µì¡í•œ ë‚´ìš©ë„ ë¹ ë¥´ê²Œ ì´í•´í•˜ëŠ” í˜ì´ ê¸¸ëŸ¬ì ¸ìš”.",
                crit: "ê¸€ì“´ì´ì˜ ì£¼ì¥ê³¼ ê·¼ê±°ë¥¼ íŒë‹¨í•˜ëŠ” ëŠ¥ë ¥ì´ ë§¤ìš° ë›°ì–´ë‚˜ìš”. ë‹¤ì–‘í•œ ê´€ì ì˜ ê¸€ì„ ì½ìœ¼ë©° ë¹„íŒì ìœ¼ë¡œ ìƒê°í•˜ëŠ” ì—°ìŠµì„ ë” ê¹Šê²Œ í•´ ë³´ì„¸ìš”. ê¸€ì“´ì´ì˜ ì˜ë„, ê·¼ê±°ì˜ ì ì ˆì„± ë“±ì„ ë”°ì ¸ë³´ê³  ìì‹ ì˜ ì˜ê²¬ê³¼ ë¹„êµí•´ ë³´ëŠ” í™œë™ì´ ë„ì›€ì´ ë¼ìš”. ì‚¬ì„¤ì´ë‚˜ ì¹¼ëŸ¼ì„ ì½ê³  ì°¬ë°˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ í† ë¡ í•´ ë³´ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•ì´ì—ìš”.",
                inf: "ê¸€ ì† ë‹¨ì„œë¥¼ ëª¨ì•„ ìˆ¨ê²¨ì§„ ì •ë³´ë¥¼ ì§ì‘í•˜ëŠ” ëŠ¥ë ¥ì„ ë” í‚¤ìš°ë©´ ì¢‹ì•„ìš”. ë¬¸ë§¥ì„ í†µí•´ ì¸ë¬¼ì˜ ê°ì • ë³€í™”ë‚˜ ì‚¬ê±´ì˜ íë¦„ì„ ì¶”ë¡ í•˜ëŠ” ì—°ìŠµì„ ì§‘ì¤‘ì ìœ¼ë¡œ í•´ ë³´ì„¸ìš”. â€˜ì™œ ì´ë ‡ê²Œ í–ˆì„ê¹Œ?â€™, â€˜ë‹¤ìŒì—ëŠ” ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œ?â€™ ê°™ì€ ì§ˆë¬¸ì„ ìŠ¤ìŠ¤ë¡œ ë˜ì§€ë©° ì½ìœ¼ë©´ ì¶”ë¡  ëŠ¥ë ¥ì´ í¬ê²Œ ìë¼ìš”."
            },
            recommendation: { type: 'advanced', badge: '<ì‘ìš© ì½”ìŠ¤>', title: 'ğŸš€ ë¬¸í•´ë ¥ ì—…ê·¸ë ˆì´ë“œ', desc: 'êµ¬ì¡° ë¬¸í•´ ê³µì‹ìœ¼ë¡œ ì§€ë¬¸ ì½ê¸°' },
            books: [
                { title: "ë¿Œë¦¬ê¹Šì€<br>ì´ˆë“±êµ­ì–´ ë…í•´ë ¥ 3ë‹¨ê³„", subTitle: "ë§¹ì§€í˜„ ì„ ìƒë‹˜", image: "teacher_maeng.jpg" },
                { title: "ë¹ ì‘ ì´ˆë“± êµ­ì–´<br>ë¹„ë¬¸í•™ ë…í•´ 3ë‹¨ê³„", subTitle: "ìœ¤ì§€ì˜ ì„ ìƒë‹˜", image: "yoon3.png" }
            ]
        },
        prev: {
            date: '2025.10.04', grade: 'ì´ˆë“± 3í•™ë…„', level: 'ë§ˆìŠ¤ ğŸ”¥', klq: '2.5',
            correct: 12, time: 35, scores: [40, 90, 60, 50], avgScores: [60, 55, 45, 48],
            summaryLevel: '[ë§ˆìŠ¤ ğŸ”¥]', summaryKlq: '[2.5]', summaryCourse: '[ê¸°ë³¸ ì½”ìŠ¤]',
            gradeLevel: "ì´ˆë“± 2í•™ë…„ 5ê°œì›” ìˆ˜ì¤€",
            desc: "<strong>ê¹€ì—˜ë¦¬</strong>ë‹˜ì€ ì‚¬ì‹¤ì  ë…í•´ë ¥ì´ ëˆˆì— ë„ê²Œ ê°•í•œ í¸ì´ì—ìš”. <br> ê¸€ ì† ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ëŠ” í˜ì´ ì¢‹ì•„ ì•ìœ¼ë¡œì˜ ì„±ì¥ì´ ê¸°ëŒ€ë¼ìš”. <br> ì•ìœ¼ë¡œ ì–´íœ˜ë ¥ê³¼ ì¶”ë¡ ë ¥ì„ ì°¨ê·¼ì°¨ê·¼ ìŒ“ìœ¼ë©´ ë” ë©‹ì§„ ë…í•´ ì‹¤ë ¥ì„ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”.",
            bestArea: { text: "â­ ì‚¬ì‹¤ì  ë…í•´ë ¥", color: "var(--col-fact)" },
            worstArea: { text: "âš  ì–´íœ˜ë ¥", color: "var(--col-vocab)" },
            guideLevels: { vocab: "(ë³´ì™„ í•„ìš”)", fact: "(ë§¤ìš° ìš°ìˆ˜)", crit: "(ë³´í†µ)", inf: "(ë³´ì™„ í•„ìš”)" },
            guides: {
                vocab: "ê¸°ì´ˆ ì–´íœ˜ë ¥ì„ ìš°ì„ ì ìœ¼ë¡œ ë‹¤ì ¸ì•¼ í•´ìš”. êµê³¼ì„œì— ë‚˜ì˜¤ëŠ” ê¸°ë³¸ ë‹¨ì–´ë¶€í„° ì°¨ê·¼ì°¨ê·¼ ìµíˆëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”. ë‚±ë§ ì¹´ë“œë‚˜ ê·¸ë¦¼ ë‹¨ì–´ í•™ìŠµì„ í™œìš©í•´ ë³´ì„¸ìš”. í•˜ë£¨ì— 3ê°œ ì •ë„ ìƒˆë¡œìš´ ë‹¨ì–´ë¥¼ ìµíˆê³  ê°„ë‹¨í•œ ë¬¸ì¥ì„ ë§Œë“¤ì–´ ë³´ëŠ” ì—°ìŠµì„ ê¾¸ì¤€íˆ í•˜ë©´ í° ë„ì›€ì´ ë¼ìš”. íƒ„íƒ„í•œ ì–´íœ˜ë ¥ì´ ìˆì–´ì•¼ ê¸€ ë‚´ìš©ì„ ì •í™•íˆ ì´í•´í•  ìˆ˜ ìˆì–´ìš”.",
                fact: "ê¸€ì—ì„œ ì¤‘ìš”í•œ ë‚´ìš©ì„ ì°¾ê³  ì •ë¦¬í•˜ëŠ” ì—°ìŠµì´ ë” í•„ìš”í•´ìš”. ë¬¸ë‹¨ì„ ì½ì€ ë’¤ â€˜ì´ ë¬¸ë‹¨ì€ ë¬´ìŠ¨ ì´ì•¼ê¸°ì˜€ì§€?â€™ í•˜ê³  í•œ ë¬¸ì¥ìœ¼ë¡œ ë§í•´ë³´ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”. ê¸€ ì† ì •ë³´ê°€ ì–¸ì œÂ·ëˆ„ê°€Â·ë¬´ì—‡ì„Â·ì™œÂ·ì–´ë–»ê²Œ ì¼ì–´ë‚¬ëŠ”ì§€(ìœ¡í•˜ì›ì¹™)ë¥¼ í™•ì¸í•˜ë©° ì½ìœ¼ë©´ ì „ì²´ ë‚´ìš©ì„ í›¨ì”¬ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì–´ìš”.",
                crit: "ì‚¬ì‹¤ê³¼ ì˜ê²¬ì„ êµ¬ë¶„í•˜ëŠ” ëŠ¥ë ¥ì´ ì•„ì§ ë¶€ì¡±í•´ì„œ ê´€ë ¨ ì—°ìŠµì´ í•„ìš”í•´ìš”. ê¸€ì“´ì´ì˜ ì£¼ì¥ê³¼ ê·¸ ê·¼ê±°ê°€ íƒ€ë‹¹í•œì§€ ìƒê°í•´ ë³´ë©° ì½ì–´ ë³´ì„¸ìš”. â€˜ì´ ë§ì´ ì •ë§ ë§ì„ê¹Œ?â€™ í•˜ê³  ìŠ¤ìŠ¤ë¡œ ì§ˆë¬¸í•˜ë©° ì½ëŠ” íƒœë„ê°€ ì¤‘ìš”í•´ìš”. ê´‘ê³ ë¬¸ì´ë‚˜ ì•ˆë‚´ë¬¸ì„ ì½ìœ¼ë©° ì„¤ë“í•˜ëŠ” ë¬¸ì¥ê³¼ ì •ë³´ ì œê³µ ë¬¸ì¥ì„ ë¹„êµí•´ ë³´ëŠ” í™œë™ë„ ì¢‹ì•„ìš”.",
                inf: "ìˆ¨ê²¨ì§„ ì˜ë¯¸ë¥¼ íŒŒì•…í•˜ëŠ” ë° ì–´ë ¤ì›€ì„ ëŠë‚„ ìˆ˜ ìˆì–´ìš”. ê¸€ì ê·¸ëŒ€ë¡œì˜ ì •ë³´ë¿ ì•„ë‹ˆë¼ ìƒí™©ê³¼ ë¬¸ë§¥ì„ í†µí•´ ë‚´ìš©ì„ ì¶”ì¸¡í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•´ìš”. ì´ì•¼ê¸°ì±…ì„ ì½ìœ¼ë©° ë“±ì¥ì¸ë¬¼ì˜ í‘œì •ì´ë‚˜ í–‰ë™ì„ ë³´ê³  ê¸°ë¶„ì„ ì§ì‘í•´ ë³´ì„¸ìš”. ë’·ì´ì•¼ê¸°ë¥¼ ìƒìƒí•´ì„œ ì¨ë³´ëŠ” í™œë™ë„ ì¶”ë¡  ëŠ¥ë ¥ì„ í‚¤ìš°ëŠ” ë° íš¨ê³¼ì ì´ì—ìš”."
            },
            recommendation: { type: 'basic', badge: '<ê¸°ë³¸ ì½”ìŠ¤>', title: 'ğŸŒ± ë¬¸í•´ë ¥ ê¸°ë³¸ ì™„ì„±', desc: 'ë…í•´ì˜ í•µì‹¬ ì „ëµ ìµíˆê¸°' },
            books: [
                { title: "ë¬¸í•´ë ¥ì„ ë¶€íƒí•´<br> 2í¸", subTitle: "ë§¹ì§€í˜„ ì„ ìƒë‹˜", image: "maeng2.png" },
                { title: "ë¹ ì‘ ì´ˆë“± êµ­ì–´<br>ë¹„ë¬¸í•™ ë…í•´ 1ë‹¨ê³„", subTitle: "ìœ¤ì§€ì˜ ì„ ìƒë‹˜", image: "teacher_yoon.jpg" }
            ]
        }
    };

    /* =========================================
       2. ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ
       ========================================= */
    function initAudio() {
        if (!audioCtx) {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            audioCtx = new AudioContext();
        }
        if (audioCtx.state === 'suspended') audioCtx.resume();
    }

    function playTone(type) {
        initAudio(); 
        const now = audioCtx.currentTime;
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();

        if (type === 'charging') {
            osc.type = 'triangle'; 
            osc.frequency.setValueAtTime(300, now);
            osc.frequency.linearRampToValueAtTime(800, now + 2.5);
            
            gainNode.gain.setValueAtTime(0, now);
            gainNode.gain.linearRampToValueAtTime(0.1, now + 0.1);
            gainNode.gain.setValueAtTime(0.1, now + 2.3);
            gainNode.gain.linearRampToValueAtTime(0, now + 2.5);

            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            osc.start(now);
            osc.stop(now + 2.5);

        } else if (type === 'result') {
            const notes = [523.25, 659.25, 783.99, 1046.50];
            notes.forEach((freq, i) => {
                const o = audioCtx.createOscillator();
                const g = audioCtx.createGain();
                o.type = 'sine';
                o.frequency.value = freq;
                g.gain.setValueAtTime(0, now + i*0.1);
                g.gain.linearRampToValueAtTime(0.2, now + i*0.1 + 0.05);
                g.gain.exponentialRampToValueAtTime(0.01, now + i*0.1 + 0.4);
                o.connect(g);
                g.connect(audioCtx.destination);
                o.start(now + i*0.1);
                o.stop(now + i*0.1 + 0.4);
            });
        }
    }

    /* =========================================
       3. í€´ì¦ˆ ë¡œì§
       ========================================= */
    function startDiagnosticTest() { 
        initAudio();
        document.getElementById('main-screen').style.display = 'none'; 
        document.getElementById('quiz-screen').style.display = 'flex'; 
    }
    
    function selectAnswer(btn, step) { 
        // [ìˆ˜ì •] í€´ì¦ˆ ë²„íŠ¼ ì„ íƒ ë¡œì§ (í´ë˜ìŠ¤ êµ¬ì¡° ë³€í™”ì— ë§ì¶¤)
        let container;
        if (step === 1) {
            container = document.querySelector('#q1 .answer-grid');
        } else {
            container = document.querySelector('#q2 .choice-stack');
        }
        
        container.querySelectorAll('button').forEach(b => b.classList.remove('selected')); 
        btn.classList.add('selected'); 
    }
    
    function nextStep() { 
        const currentQuestion = document.getElementById(`q${currentStep}`);
        const isSelected = currentQuestion.querySelector('.selected');
        // [ìˆ˜ì •] ì•Œë¦¼ ë©”ì‹œì§€ ìˆ˜ì •
        if (!isSelected) { alert("ë‹µì•ˆì„ ì„ íƒí•´ ì£¼ì„¸ìš”."); return; }
        
        if (currentStep < totalSteps) { 
            // í˜„ì¬ ë¬¸ì œ ìˆ¨ê¸°ê¸°
            document.getElementById(`q${currentStep}`).classList.remove('active'); 
            
            // ë°°ì§€ ì—…ë°ì´íŠ¸
            if(currentStep === 1) {
                document.getElementById('badge-vocab').classList.remove('active');
                document.getElementById('badge-vocab').style.background = "#fff"; // ì™„ë£Œ ì²˜ë¦¬ ì‹œ ì‹œê°ì  ë³€í™”
                document.getElementById('badge-vocab').style.color = "#ccc";
            }
            
            currentStep++; 
            
            // ë‹¤ìŒ ë¬¸ì œ ë³´ì´ê¸°
            document.getElementById(`q${currentStep}`).classList.add('active'); 
            
            // ë°°ì§€ ì—…ë°ì´íŠ¸
            if(currentStep === 2) document.getElementById('badge-reading').classList.add('active');
            
            // í…ìŠ¤íŠ¸ ë° í•˜ë‹¨ ë°” ì—…ë°ì´íŠ¸
            document.getElementById('progress-text').textContent = `${currentStep} / ${totalSteps}`; 
            
            // [ì¶”ê°€] ë§ˆì§€ë§‰ ë¬¸ì œì¼ ê²½ìš° ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
            if(currentStep === totalSteps) {
                // SVG ì•„ì´ì½˜ í¬í•¨í•˜ì—¬ ì—…ë°ì´íŠ¸
                document.getElementById('quiz-next-btn').innerHTML = `ì œì¶œí•˜ê¸° <span><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></span>`;
            }
            
        } else { 
            // í€´ì¦ˆ ì¢…ë£Œ ë° ë¡œë”© í™”ë©´ ì‹œì‘
            document.getElementById('quiz-screen').style.display = 'none'; 
            document.getElementById('loading-screen').style.display = 'flex';
            
            playTone('charging');

            const loadingBar = document.getElementById('loading-bar');
            loadingBar.classList.remove('fill-animation'); 
            void loadingBar.offsetWidth; 
            loadingBar.classList.add('fill-animation');

            setTimeout(() => { 
                document.getElementById('loading-screen').style.display = 'none'; 
                showResult(); 
            }, 3500); 
        } 
    }
    
    function showResult() { 
        playTone('result'); 
        document.getElementById('result-screen').style.display = 'block'; 
        loadReportData('current');
    }

    function changeReport() {
        const select = document.getElementById('history-select');
        loadReportData(select.value === 'prev' ? 'prev' : 'current');
    }

    /* =========================================
       4. ë¦¬í¬íŠ¸ ë Œë”ë§ ë° ì• ë‹ˆë©”ì´ì…˜
       ========================================= */
    function loadReportData(key) {
        const data = reportData[key];
        
        const setText = (id, text) => document.getElementById(id).innerText = text;
        const setHTML = (id, html) => document.getElementById(id).innerHTML = html;

        setText('grade-text', data.grade);
        setText('date-text', data.date);
        setText('level-text', data.level);
        setText('klq-text', data.klq);
        setText('correct-text', `ì´ 20ë¬¸í•­ ì¤‘ [${data.correct}]ë¬¸í•­ ì •ë‹µ`);
        setText('summary-level', data.summaryLevel);
        setText('summary-klq', data.summaryKlq);
        setText('summary-course', data.summaryCourse);
        setText('grade-level-text', data.gradeLevel);
        setText('my-time', data.time);
        setHTML('summary-desc', data.desc);

        // ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
        const bestBox = document.getElementById('insight-best');
        bestBox.innerText = data.bestArea.text;
        bestBox.style.color = data.bestArea.color;
        const worstBox = document.getElementById('insight-worst');
        worstBox.innerText = data.worstArea.text;
        worstBox.style.color = data.worstArea.color;

        // ë ˆë²¨ ì•¡í‹°ë¸Œ ì²˜ë¦¬
        document.querySelectorAll('#level-popup .level-item').forEach(item => {
            item.classList.toggle('active', item.innerText.replace(/\s/g, '') === data.level.replace(/\s/g, ''));
        });

        // ê°€ì´ë“œ ì—…ë°ì´íŠ¸
        setHTML('header-vocab', `ì–´íœ˜ë ¥ <span class="level-tag">${data.guideLevels.vocab}</span>`);
        setHTML('header-fact', `ì‚¬ì‹¤ì  ë…í•´ë ¥ <span class="level-tag">${data.guideLevels.fact}</span>`);
        setHTML('header-crit', `ë¹„íŒì  ë…í•´ë ¥ <span class="level-tag">${data.guideLevels.crit}</span>`);
        setHTML('header-inf', `ì¶”ë¡ ì  ë…í•´ë ¥ <span class="level-tag">${data.guideLevels.inf}</span>`);
        setText('guide-vocab', data.guides.vocab);
        setText('guide-fact', data.guides.fact);
        setText('guide-crit', data.guides.crit);
        setText('guide-inf', data.guides.inf);

        // ì¶”ì²œ ì½”ìŠ¤ ì—…ë°ì´íŠ¸
        const recBox = document.getElementById('rec-prog-box');
        setText('rec-prog-badge', data.recommendation.badge);
        setText('rec-prog-name', data.recommendation.title);
        setHTML('rec-prog-desc', data.recommendation.desc);
        recBox.className = `program-box ${data.recommendation.type}`; 

        // ì±… ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        const bookList = document.getElementById('rec-book-list');
        bookList.innerHTML = data.books.map(book => `
            <div class="book-item">
                <div class="book-cover">
                    <img src="${book.image}" alt="${book.subTitle}" onerror="this.src='https://placehold.co/100x130/e0f7fa/006064?text=Teacher'">
                </div>
                <div class="book-title">
                    <span style="font-weight:bold; color:#333; font-size:13px;">${book.subTitle}</span><br>
                    <span style="font-size:11px; color:#888;">${book.title}</span>
                </div>
            </div>
        `).join('');

        // ê·¸ë˜í”„ ì• ë‹ˆë©”ì´ì…˜
        const barIds = ['bar-vocab', 'bar-fact', 'bar-crit', 'bar-inf'];
        const scoreIds = ['score-vocab', 'score-fact', 'score-crit', 'score-inf'];
        
        data.scores.forEach((score, i) => {
            document.getElementById(scoreIds[i]).innerText = score;
            const bar = document.getElementById(barIds[i]);
            bar.style.height = '0px';
            bar.parentElement.classList.remove('animate');
        });

        setTimeout(() => {
            data.scores.forEach((score, i) => {
                const bar = document.getElementById(barIds[i]);
                bar.style.height = (score * 1.8) + 'px';
                bar.parentElement.classList.add('animate');
            });
        }, 100);

        updateAvgGraph(data.avgScores);

        animateValue('scoreDonut', 0, Math.floor((data.correct / 20) * 100), 600, 'donut');
        animateValue('gaugeChar', 0, data.time, 800, 'gauge', (key === 'prev' ? 30 : 36));
    }

    function updateAvgGraph(avgScores) {
        const xCoords = [62.5, 187.5, 312.5, 437.5];
        const categories = ["ì–´íœ˜ë ¥", "ì‚¬ì‹¤ì  ë…í•´ë ¥", "ë¹„íŒì  ë…í•´ë ¥", "ì¶”ë¡ ì  ë…í•´ë ¥"];
        
        let pointsString = "";
        const dots = document.querySelectorAll('.svg-graph-layer .avg-dot');
        const tooltip = document.getElementById('graph-avg-tooltip');
        
        avgScores.forEach((score, i) => {
            const x = xCoords[i];
            const y = 200 - (score * 1.8);
            pointsString += `${x},${y} `;
            
            if(dots[i]) { 
                dots[i].setAttribute('cx', x); 
                dots[i].setAttribute('cy', y); 
                
                const showTooltip = () => {
                    tooltip.innerHTML = `${categories[i]} <br>í•™ë…„ í‰ê· : <strong>${score}ì </strong>`;
                    const ratio = x / 500;
                    tooltip.style.left = `calc(30px + (100% - 30px) * ${ratio})`;
                    tooltip.style.top = `${y + 15}px`; 
                    tooltip.classList.add('show');
                };

                dots[i].onmouseenter = showTooltip;
                
                dots[i].onclick = (e) => {
                    e.stopPropagation(); 
                    showTooltip();
                };
                
                dots[i].onmouseleave = () => {
                    tooltip.classList.remove('show');
                };
            }
        });
        document.querySelector('.avg-line').setAttribute('points', pointsString.trim());
    }

    // í†µí•© ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
    function animateValue(targetId, start, end, duration, type, avgTime = 0) {
        let startTimestamp = null;
        const element = document.getElementById(targetId);

        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            const currentVal = Math.floor(progress * (end - start) + start);

            if (type === 'donut') {
                const percent = currentVal;
                const circumference = 2 * Math.PI * 75; 
                const offset = circumference * (1 - percent / 100);
                element.style.strokeDashoffset = offset;
                document.getElementById('donutPercentText').textContent = `${percent}%`;

            } else if (type === 'gauge') {
                const totalTime = 50;
                const myPercent = currentVal / totalTime;
                const avgPercent = avgTime / totalTime;
                
                const pathLength = 251.3;
                document.querySelector('.gauge-my-arc').style.strokeDashoffset = pathLength * (1 - myPercent);
                
                const radius = 80; const centerX = 100; const centerY = 100;
                const myAngleRad = Math.PI * (1 - myPercent);
                const charX = centerX + radius * Math.cos(myAngleRad);
                const charY = centerY - radius * Math.sin(myAngleRad);
                element.style.left = `${(charX / 200) * 100}%`;
                element.style.top = `${(charY / 105) * 100}%`;

                const avgLabel = document.getElementById('gaugeAvgLabel');
                const avgAngleRad = Math.PI * (1 - avgPercent);
                const avgX = centerX + radius * Math.cos(avgAngleRad);
                const avgY = centerY - radius * Math.sin(avgAngleRad);
                avgLabel.style.left = `${(avgX / 200) * 100}%`;
                avgLabel.style.top = `${((avgY - 15) / 105) * 100}%`;
                avgLabel.textContent = `${avgTime}ë¶„`;
            }

            if (progress < 1) {
                window.requestAnimationFrame(step);
            }
        };
        window.requestAnimationFrame(step);
    }

    /* =========================================
       5. íŒì—… ë° ìœ í‹¸ë¦¬í‹°
       ========================================= */
    function closeAllPopups() {
        document.querySelectorAll('.klq-tooltip, .level-dropdown, .tooltip-text').forEach(el => el.classList.remove('show'));
    }

    function togglePopup(event, targetId) {
        event.stopPropagation();
        const target = document.getElementById(targetId);
        if (!target) return;
        
        const isShown = target.classList.contains('show');
        closeAllPopups(); 
        if (!isShown) target.classList.add('show'); 
    }

    document.addEventListener('click', closeAllPopups);
</script>

</body>
</html>




